# Quick Fixes for Team Member Page

## Fix #2: Add Member Function (TeamMember.tsx)

**ADD this function after line 159 (after the confirmDeleteMember function):**

```tsx
const handleAddMember = async (newMemberData: { name: string; email: string; phone?: string }) => {
  try {
    const response = await fetch('http://localhost:8000/auth/team-head/members/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${localStorage.getItem('access')}`
      },
      body: JSON.stringify({
        username: newMemberData.name,
        email: newMemberData.email,
        password: 'Welcome123!', // Default password - user should change
        phone: newMemberData.phone || ''
      })
    });
    
    if (!response.ok) throw new Error('Failed to add member');
    
    // Refresh the list
    await fetchTeamMembers();
    setIsAddMemberOpen(false);
    alert('Team member added successfully! Default password: Welcome123!');
  } catch (error) {
    console.error('Error adding member:', error);
    alert('Failed to add team member');
  }
};
```

**NOTE:** The add member modal UI already exists in the file, it just needs this handler function.

---

## Fix #3: Update Delete Button (TeamMember.tsx)

**FIND line 434-438:**
```tsx
onClick={() => {
  setTeamMembers(prev => prev.filter(m => m.id !== selectedMember.id));
  setIsDeleteDialogOpen(false);
  setSelectedMember(null);
}}
```

**REPLACE WITH:**
```tsx
onClick={handleDeleteMember}
```

This will use the API delete function you already created instead of just filtering locally.

---

## Fix #4: Dashboard Refresh (Teamhead.tsx)

**FIND the handleAddMember function in Teamhead.tsx (should be around line 100):**

Look for:
```tsx
const handleAddMember = async (e: React.FormEvent) => {
```

**MAKE SURE it has this line after the successful API call:**
```tsx
if (!response.ok) throw new Error('Failed to add member');

// THIS LINE IS CRITICAL:
await fetchDashboardData();

setIsAddMemberOpen(false);
```

If `await fetchDashboardData();` is missing, add it!

---

## Summary

**TeamMember.tsx:**
1. Add `handleAddMember` function (copy from above)
2. Change delete button onClick to use `handleDeleteMember`

**Teamhead.tsx:**
1. Ensure `fetchDashboardData()` is called after adding member

That's it! Team members will now be fully dynamic. ðŸŽ‰
